(function(o,c){typeof exports=="object"&&typeof module<"u"?module.exports=c(require("vue"),require("lodash-es"),require("@zhangqingcq/china-area-data")):typeof define=="function"&&define.amd?define(["vue","lodash-es","@zhangqingcq/china-area-data"],c):(o=typeof globalThis<"u"?globalThis:o||self,o.ArCascader=c(o.Vue,o.lodashEs,o.areaData))})(this,function(o,c,y){"use strict";return o.defineComponent({__name:"ArCascader",props:{modelValue:{default:()=>[]},level:{default:2},dataType:{default:"all"},disabled:{type:Boolean,default:!1},size:{},placeholder:{},renderFormat:{type:Function,default:v=>v.join("/")},changeOnSelect:{type:Boolean,default:!1}},emits:["update:modelValue","on-change"],setup(v,{emit:T}){const V=T,n=v;let d=[];const _=e=>{if(typeof e=="number"&&(e=e.toString()),e.length<12){const l=[...e];for(;l.length<12;)l.push("0");return Number(l.join(""))}return Number(e)},q=o.computed({get(){var l,a,r,u,i,f,s,m;let e=[];return(a=(l=n.modelValue)==null?void 0:l.every)!=null&&a.call(l,t=>/^[\u4e00-\u9fa5]+$/.test(t))?e=h(n.modelValue,"label","value"):(u=(r=n.modelValue)==null?void 0:r.every)!=null&&u.call(r,t=>/^\d+$/.test(t))?e=n.modelValue.map(_):(f=(i=n.modelValue)==null?void 0:i.every)!=null&&f.call(i,t=>t==null?void 0:t.hasOwnProperty("code"))?e=h(n.modelValue.map(t=>({code:_(t.code),name:t.name})),"value","value","code"):(m=(s=n.modelValue)==null?void 0:s.every)!=null&&m.call(s,t=>t==null?void 0:t.hasOwnProperty("name"))&&(e=h(n.modelValue,"label","value","name")),d=e,e},set(e){if(e=e.map(a=>typeof a=="string"?Number(a):a),B(e))return;let l=[];n.dataType==="all"?l=h(e,"value","all"):n.dataType==="code"?l=e:n.dataType==="name"&&(l=h(e,"value","label")),V("update:modelValue",l),V("on-change",l)}}),N=o.computed(()=>{const e=[];return y.forEach(l=>{const a={label:l.label,value:l.value};Number(n.level)>0&&(a.children=[],l.children.forEach(r=>{const u={label:r.label,value:r.value};Number(n.level)>1&&(u.children=[],r.children.forEach(i=>{u.children.push({label:i.label,value:i.value})})),a.children.push(u)})),e.push(a)}),e});function h(e,l,a,r){var t,z,C;const u=[];let i,f,s;r?(i=(t=e[0])==null?void 0:t[r],f=(z=e[1])==null?void 0:z[r],s=(C=e[2])==null?void 0:C[r]):(i=e[0],f=e[1],s=e[2]);const m=c.find(y,p=>p[l]===i);if(m){if(g(u,m,a),n.level===0||f===void 0)return u;const p=c.find(m.children,b=>b[l]===f);if(p){if(g(u,p,a),n.level===1||s===void 0)return u;const b=c.find(p.children,O=>O[l]===s);if(b)return g(u,b,a),u}}return[]}function g(e,l,a){a==="label"||a==="value"?e.push(l[a]):e.push({code:l.value,name:l.label})}function B(e){return(e==null?void 0:e.length)===0?(d==null?void 0:d.length)===0:(d==null?void 0:d.length)===0?!1:e.every((l,a)=>l===(d==null?void 0:d[a]))}return(e,l)=>{const a=o.resolveComponent("Cascader");return o.openBlock(),o.createBlock(a,{modelValue:q.value,"onUpdate:modelValue":l[0]||(l[0]=r=>q.value=r),data:N.value,disabled:n.disabled,size:n.size,placeholder:n.placeholder,"render-format":n.renderFormat,"change-on-select":n.changeOnSelect,transfer:"",filterable:""},null,8,["modelValue","data","disabled","size","placeholder","render-format","change-on-select"])}}})});
